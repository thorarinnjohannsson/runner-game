<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-fullscreen">
    <title>Animal Jump</title>
    <!-- Google Fonts: Press Start 2P -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Styles loaded dynamically by loader script to prevent caching -->
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        <input type="text" id="playerNameInput" placeholder="Enter your name" maxlength="12" autocomplete="off">
    </div>

    <!-- Auto-loader: Forces fresh files every reload for testing -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        (function() {
            // Generate a unique version number based on the current time
            var v = Date.now(); 

            // 1. Load CSS with version
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'styles.css?v=' + v;
            document.head.appendChild(link);

            // 2. List of scripts to load in order
            var scripts = [
                "js/mobile.js",
                "js/supabase-client.js",
                "js/themes.js",
                "js/level.js",
                "js/effects.js",
                "js/transitions.js",
                "js/background.js",
                "js/characters.js",
                "js/scoring.js",
                "js/player.js",
                "js/obstacle.js",
                "js/input.js",
                "js/collision.js",
                "js/difficulty.js",
                "js/storage.js",
                "js/audio.js",
                "js/ui.js",
                "js/main.js"
            ];

            // 3. Load scripts sequentially to ensure correct order
            function loadNext(index) {
                if (index >= scripts.length) return;
                
                var script = document.createElement('script');
                script.src = scripts[index] + '?v=' + v;
                script.onload = function() { loadNext(index + 1); };
                document.body.appendChild(script);
            }
            
            // Start loading
            loadNext(0);
        })();
    </script>
</body>
</html>